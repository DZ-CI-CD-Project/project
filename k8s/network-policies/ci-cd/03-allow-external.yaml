apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-external
  namespace: ci-cd  # 실제 CI/CD 네임스페이스 이름으로 변경 필요
spec:
  podSelector:
    matchLabels:
      role: ci-runner  # CI/CD 러너 파드에만 적용
  policyTypes:
  - Egress
  egress:
  # 외부 인터넷 접근 허용 (Harbor, GitHub, SonarQube 등)
  - to:
    - ipBlock:
        cidr: 0.0.0.0/0
    ports:
    - protocol: TCP
      port: 443  # HTTPS
    - protocol: TCP
      port: 80   # HTTP
    # 참고: DNS (UDP/TCP 53)는 01-allow-dns.yaml에서 이미 허용되므로 제거

